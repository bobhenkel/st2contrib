---
name: "consul_secret_create"
pack: "bitesize"
description: "Check for new secrets"
enabled: true

trigger:
  type: "kubernetes.secrets"
  parameters: {}

criteria:
  trigger.resource:
    type: "contains"
    pattern: "ADDED"
  trigger.object_kind:
    type: "equals"
    pattern: "Secret"
  trigger.name:
    type: "equals"
    pattern: "consul-stackstorm-mgmt"
  trigger.namespace:
    type: "equals"
    pattern: "kube-system"

action:
  ref: "bitesize.new_configure_consul_pack"
