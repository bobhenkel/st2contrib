---
    chain:
        -
            name: "ns_approved"
            ref: "pearson.nsapproved"
            parameters:
                ns: "{{namespace}}"
            on-success: "get_jenkins"
            on-failure: "fail"
        -
            name: "get_jenkins"
            ref: "git.clone"
            parameters:
                destination: "/tmp/jenkins"
                source: "git@github.com:pearsontechnology/kubernetes-charts.git"
            on-success: "update_jenkins"
            on-failure: "fail"
        -
            name: "install_jenkins"
            ref: "bitesize.install_jnkins"
            parameters:
                source: "/tmp/jenkins/jenkins/templates"
                ns: "{{namespace}}"
            on-success: "delete_jenkins"
            on-failure: "fail"
        -
            name: "delete_jenkins"
            ref: "linux.rm"
            parameters:
                force: true
                recursive: true
                target: "/tmp/jenkins"
            on-success: "setquota"
            on-failure: "fail"
        -
            name: "setquota"
            ref: "kubernetes.setquota"
            parameters:
                ns: "{{namespace}}"
            on-failure: "fail"
        -
            name: "fail"
            ref: "core.local"
            parameters:
                cmd: "echo fail c4"
