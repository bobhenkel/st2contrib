---
  chain:
    -
      name: "create_rule"
      ref: "bitesize.cass_consul"
      parameters:
        cluster: "{{cluster}}"
      publish:
        rule: "{{create_rule.stdout}}"
      on-success: "create_token"
    -
      name: "create_token"
      ref: "consul.create_token"
      parameters:
        name: "{{cluster}}"
        acl_type: "client"
        rules: "{{rule}}"
